--- 
title: "Kungfu Pandas"
author: "Lê Huỳnh Đức"
date: "`r Sys.Date()`"
site: bookdown::bookdown_site
output: bookdown::gitbook
documentclass: book
bibliography: [book.bib, packages.bib]
biblio-style: apalike
link-citations: yes
github-repo: rstudio/bookdown-demo
description: "Kungfu Panda"
---

# Lời nói đầu {-}
## Giới thiệu cuốn sách {-}
## Cài đặt Jupyter Lab {-}
## Cài đặt Pandas {-}

<!--chapter:end:index.Rmd-->

# Cấu trúc và kiểu dữ liệu 


## Series
Trong Pandas, `Series` là mảng 1 chiều bao gồm một danh sách giá trị, và một mảng chứa index 
của các giá trị. Trong dữ liệu dảng bảng, mỗi Series được xem như là một cột của bảng đó. 
Cách đơn giản để tạo 1 series như sau
```python
s = pd.Series(data, index=None, name=None)
```
Trong đó `data` có thể  có dạng:

- numpy.ndarray, List

- Python dict

- Scalar 

`index` có thể truyền hoặc không, tùy vào dạng của `data` mà `index` sẽ được định nghĩa khác nhau. 
`name` là tên của `Series`, giá trị này cũng không nhất thiết phải truyền vào.

### Các cách khởi tạo {-}
**Khởi tạo Series bằng array**
Khi không truyền giá trị `index`, `Series` sẽ mặc định index của nó là 1 mảng số nguyên từ `0` đến `len(data) - 1` 

```python
In [1]: pd.Series(data=[0, 1, 2], index=["a", "b", "c"], name="meow")
Out[1]:
a    0
b    1
c    2
Name: meow, dtype: int64
```


**Khởi tạo Series bằng dict**
```python
In [1]: pd.Series({"b":1, "a":0, "c": 2})
Out[1]: 
b    1
a    0
c    2
dtype: int64

```

```{block2, type='rmdnote'}
**_Lưu ý_:** 
Trong trường hợp bạn truyền biến `index` vào, `Series` sẽ đánh index dựa vào thứ tự trong `index`, và chỉ chứa các giá trị của dict có key nằm trong `index`. 
Với các giá trị trong biến `index` không có trong keys của dict, `Series` sẽ tạo ra các giá trị 
bị thiếu **NaN**.
```

```python
In [1]: pd.Series({"a": 0, "b": 1, "c": 2, "e": 4}, index=["b", "c", "d", "a"])
Out[1]: 
b    1.0
c    2.0
d    NaN
a    0.0
dtype: float64
```

```{block2, type='rmdnote'}
**_Lưu ý_:** **NaN** là giá trị mặc định cho dữ liệu bị thiếu trong pandas và giá trị này có kiểu 
là `float64` nên kiểu dữ liệu của `Series` cũng là `float64` khác với `int64` ở ví dụ trước đó. 

```

**Khởi tạo Series bằng một giá trị (Scalar)**
```python
In [1]: pd.Series(data=1, index=["a", "b", "c"])
Out[1]: 
a    1
b    1
c    1
dtype: int64
```
### Một số thao tác cơ bản {-}
Thao tác trên `Series` cũng giống với thao tác trên `numpy.array`. Ngoài ra chúng ta còn có thể 
tác với Series dựa vào index

Ví dụ:

```python
In [1]: s = pd.Series(data=[0, 1, 2, 3, 4, 5], index=["a", "b", "c", "d", "e", "f"])
```

**Lấy theo indice**
```python
In [2]: s[2]
Out[2]: 2
``` 

**Lấy theo index**
```python
In [3]: s["c"]
Out[3]: 2 
```

**Slice indice**
```python
In [4]: s[1:3]
Out[4]:
b    1
d    2
dtype: int64
```

**Slice index**
```python
In [5]: s["b":"c"]
Out[5]: 
b    1
c    2
dtype: int64
``` 

**List indice**
```python
In [6]: s[[1, 2, 4]]
Out[6]:
b    1
c    2
e    4
dtype: int64
```

**List index**
```python
In [7]: s[["b", "c", "e"]]
Out[7]:
b    1
c    2
e    4
dtype: int64
```
**Điều kiện**
```python
In [5]: s[s > s.mean()]
Out[5]:
d    3
e    4
f    5
dtype: int64
```

## DataFrame
`DataFrame` là cấu trúc dữ liệu chính và cũng là đặc trưng của pandas. Cũng giống như SQL Table, 
`DataFrame` là một bảng gồm một hay nhiều cột dữ liệu. Hoặc có thể nói rõ hơn là DataFrame là tập 
hợp các Series lại với nhau.
Cách khởi tạo DataFrame như sau
```python
df = pd.DataFrame(data=None, index=None, columns=None, dtype=None, copy=False)
``` 
Cũng giống như Series, `data` của DataFrame có nhiều cách khởi tạo khác nhau như:

- Dict 
- Mảng 2 chiều `numpy.ndarray`, List
- Bản ghi có cấu trúc
- Từ 1 `Series`
- Từ `DataFrame` khác

Tùy vào cấu trúc của `data` mà chúng ta có thể bỏ qủua biến `index`. Biến `columns` thể hiện tên
của các `Series`. `dtype` sẽ định nghĩa các kiểu dữ liêu của dữ liệu, chúng ta sẽ thảo luận về nó 
ở phần kế tiếp của chương này. `copy` dùng để  tạo bản sao từ dữ liệu `data`, nó chỉ ảnh hưởng khi 
`data` là DataFrame khác hoặc numpy.ndarray, việc copy này sẽ tránh trường hợp 2 biến cùng trỏ về 
cùng 1 bộ nhớ.

### Các cách khởi tạo {-}
**Khởi tạo DataFrame từ dict của Series**

Khi không truyền biến `index` vào, thì index của `DataFrame` sẽ là hợp giữa 2 index của `Series` và
chúng sẽ được sắp xếp theo thứ tự từ vựng. Nếu ta không truyền `columns` thì các cột của `DataFrame` sẽ
được sắp xếp theo thứ tự từ vựng các keys của dict. 

Khi truyền biến `index` vào, tương tự như Series, chỉ những index nằm trong `index` mới được chọn, còn 
những index bị thiếu sẽ được điền giá trị **NaN**

Khi truyền giá trị `columns`, DataFrame sẽ chọn những `Series` thuộc dict có key thuộc `columns`, giá trị
trong `columns` không có trong key của dict sẽ được gán **NaN**  
```python
In [1]: d = {
            "one": pd.Series([1, 2, 3], index=["c", "b", "a"]),
            "two": pd.Series([1, 2, 3, 4], index=["c", "a", "b", "d"])
            }
In [2]: pd.DataFrame(d)
Out[2]:
   one  two
a  3.0    2
b  2.0    3
c  1.0    1
d  NaN    4

In [3]: pd.DataFrame(d, index=["d", "b", "a"])
Out[3]: 
   one	two
d  NaN	  4
b  2.0	  3
a  3.0	  2

In [4]: pd.DataFrame(d, index=["d", "b", "a"], columns=["two", "three"])
Out[4]:
   two	three
d	 4	  NaN
b	 3	  NaN
a	 2	  NaN
```
**Khởi tạo DataFrame từ Mảng 2 chiều**

**Khởi tạo DataFrame từ danh sách các dict**

**Khởi tạo DataFrame từ bảng có cấu trúc**

## Data type trong pandas 

--------------------------------------------------------
Các kiểu dữ liệu        Numpy/Pandas      Hiển thị        
phổ  biến               object         
--------------------    ----------------  --------------
Boolean                 np.bool           *bool*

Integer                 np.int            *int*

Float                   np.float          *float*

Object                  np.object         *O, object*

Datetime                np.datetime64,    *datetime64*
                        pd.Timestamp 

Timedelta               np.timedelta64,   *timedelta64*
                        pd.Timedelta
                        
Category                pd.categorical    *category*              
                     
--------------------------------------------------------

<!--chapter:end:posts/01-DataStructure_Datatype.Rmd-->

# Nhập xuất trong pandas
## Đọc và lưu file
## Cấu hình pandas 

<!--chapter:end:posts/02-IO.Rmd-->

# Một số hàm cơ bản

<!--chapter:end:posts/03-Funda_Function.Rmd-->

# Lặp trong Pandas 
## Sử dụng vectorizer
## Sử dụng apply
## Sử dụng iterator
## Xử lý song song trong pandas

<!--chapter:end:posts/04-Loop.Rmd-->

# Select và Filter
## Index
## loc và iloc
## Lọc theo điều kiện

<!--chapter:end:posts/05-Select_Filter.Rmd-->

# Các cách phối hợp nhiều bảng với nhau 
## Join
## Merge
## Concat

<!--chapter:end:posts/06-Merge_Join_Concat.Rmd-->

# Groupby và Aggregate 

<!--chapter:end:posts/07-Groupby_Aggregate.Rmd-->

# Làm việc với 1 số kiểu dữ liệu 
## Xử  lý dữ liệu dạng text 
## Xử lý dữ liệu dạng timestamp 
## Category trong pandas
## Xử lý Missing data

<!--chapter:end:posts/08-Process_data.Rmd-->

# Một số kiến thức nâng cao
## MultiIndex  
## Pivot và Merge
## Resample
## Window

<!--chapter:end:posts/09-Advance_Function.Rmd-->

# Anomaly Detection Project

<!--chapter:end:posts/10-AD.Rmd-->

# Visualize với Matplotlib

<!--chapter:end:posts/11-Visualize.Rmd-->

